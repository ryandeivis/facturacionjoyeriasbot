# =============================================================================
# Jewelry Invoice Bot - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values
# All settings have sensible defaults for development

# =============================================================================
# ENVIRONMENT
# =============================================================================
ENVIRONMENT=development  # development, staging, production
DEBUG=true

# =============================================================================
# PROJECT INFO
# =============================================================================
PROJECT_NAME=Jewelry Invoice Bot
VERSION=1.0.0
API_VERSION=v1

# =============================================================================
# TELEGRAM BOT
# =============================================================================
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
# TELEGRAM_WEBHOOK_URL=https://your-domain.com/webhook  # Solo produccion
TELEGRAM_MAX_CONNECTIONS=40

# =============================================================================
# DATABASE
# =============================================================================
# Development (SQLite)
DATABASE_URL=sqlite+aiosqlite:///jewelry_invoices.db

# Production (PostgreSQL)
# DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/jewelry_db

# Connection pool settings
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_RECYCLE=3600
DATABASE_ECHO=false
DATABASE_CONNECT_TIMEOUT=10

# =============================================================================
# N8N INTEGRATION
# =============================================================================
# Webhook for data extraction (text/voice/photo processing)
N8N_WEBHOOK_URL=http://localhost:5678/webhook/jewelry-extract

# Webhook for PDF generation
N8N_PDF_WEBHOOK_URL=http://localhost:5678/webhook/jewelry-pdf

# Request settings
N8N_TIMEOUT_SECONDS=60
N8N_MAX_RETRIES=3
N8N_RETRY_DELAY_SECONDS=2

# =============================================================================
# SECURITY
# =============================================================================
# Secret key for JWT and encryption (min 32 characters in production)
SECRET_KEY=your-super-secret-key-change-in-production

# Optional: Encryption key for PII fields (Fernet key)
# ENCRYPTION_KEY=your-fernet-key-here

# JWT settings
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_HOURS=168

# Password policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_SPECIAL=true

# Session
SESSION_TIMEOUT_MINUTES=60

# =============================================================================
# RATE LIMITING - General
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Rate Limiting - Login (anti brute force)
RATE_LIMIT_LOGIN_MAX=5
RATE_LIMIT_LOGIN_WINDOW=60
RATE_LIMIT_LOGIN_BLOCK=300  # 5 minutos de bloqueo

# Rate Limiting - n8n API
RATE_LIMIT_N8N_MAX=20
RATE_LIMIT_N8N_WINDOW=60

# Rate Limiting - Invoice creation
RATE_LIMIT_INVOICE_MAX=10
RATE_LIMIT_INVOICE_WINDOW=300  # 5 minutos

# Rate Limiting - Messages
RATE_LIMIT_MESSAGE_MAX=30
RATE_LIMIT_MESSAGE_WINDOW=60

# =============================================================================
# FILES
# =============================================================================
UPLOAD_DIR=uploads
MAX_UPLOAD_SIZE_MB=10
ALLOWED_IMAGE_TYPES=jpg,jpeg,png,webp
ALLOWED_AUDIO_TYPES=ogg,mp3,wav
MAX_VOICE_DURATION_SECONDS=300

# =============================================================================
# INVOICE CONFIGURATION
# =============================================================================
INVOICE_PREFIX=JOY
TAX_RATE=0.19  # IVA Colombia 19%
INVOICE_EXPIRY_DAYS=30
MAX_ITEMS_PER_INVOICE=50
MAX_INVOICE_TOTAL=9999999999

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_VOICE_INPUT=true
FEATURE_PHOTO_INPUT=true
FEATURE_MULTI_TENANT=true
FEATURE_PDF_GENERATION=true
FEATURE_AUDIT_LOG=true
FEATURE_METRICS=true

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR
LOG_FORMAT=console  # console or json
LOG_DIR=logs
LOG_MAX_SIZE_MB=50
LOG_BACKUP_COUNT=10

# =============================================================================
# MONITORING & HEALTH
# =============================================================================
HEALTH_CHECK_ENABLED=true
METRICS_ENABLED=true
METRICS_PORT=9090

# =============================================================================
# SAAS / MULTI-TENANT
# =============================================================================
DEFAULT_TENANT_ID=default
MAX_USERS_PER_TENANT=100
MAX_INVOICES_PER_MONTH=1000
